<!DOCTYPE HTML>
<html>
	<head>
		<title>Cowbell</title>
		<script src="../dist/cowbell/cowbell.min.js"></script>
		<script src="../dist/cowbell/ay_chip.min.js"></script>
		<script src="../dist/cowbell/vtx.min.js"></script>
		<script src="../dist/cowbell/zx.min.js"></script>
		<script src="../dist/cowbell/openmpt_player.js"></script>

		<script>
			function go() {
				var audioPlayer = new Cowbell.Player.Audio();
				var psgPlayer = new Cowbell.Player.PSG();
				var stcPlayer = new Cowbell.Player.ZXSTC({stereoMode: 'acb'});
				var pt3Player = new Cowbell.Player.ZXPT3({stereoMode: 'acb'});
				var vtxPlayer = new Cowbell.Player.VTX();
				var modPlayer = new Cowbell.Player.OpenMPT({
					'pathToLibOpenMPT': '../dist/cowbell/libopenmpt.js'
				});

				var tracks = [
					[
						"Zipper Flies - ihatemornings (MP3)",
						new audioPlayer.Track('music/zipper_flies.mp3')
					],
					[
						"Dancing Queen - Gasman (PSG)",
						new psgPlayer.Track('music/dancing_queen.psg')
					],
					[
						"Worlds Apart - Gasman (STC)",
						new stcPlayer.Track('music/gasman_-_worlds_apart.stc')
					],
					[
						"Summer Mood - Megus (PT3)",
						new pt3Player.Track('music/summer_mood.pt3')
					],
					[
						"Squareland Story - Asi (VTX)",
						new vtxPlayer.Track('music/squareland_story.vtx')
					],
					[
						"Ambient Power - Vogue (MOD)",
						new modPlayer.Track('music/ambpower.mod')
					],
					[
						"Inside Out - Purple Motion (S3M)",
						new modPlayer.Track('music/inside_out.s3m')
					],
					[
						"Rainbow Dash - Radix & Xyce (XM)",
						new modPlayer.Track('music/radix_xyce_-_rainbow_dash_.xm')
					]
				]

				container = document.getElementById('player');
				player = new Cowbell.UI.Basic(container);

				var selector = document.getElementById('track-select');
				for (var i = 0; i < tracks.length; i++) {
					var title = tracks[i][0];
					var track = tracks[i][1];
					var option = document.createElement('option');
					selector.appendChild(option);
					option.value = i;
					option.appendChild(document.createTextNode(title));
				}
				selector.onchange = function() {
					var index = parseInt(selector.value, 10);
					if (!isNaN(index)) {
						var track = tracks[index][1];
						player.open(track);
					}
				}
			}
		</script>
	</head>
	<body onload="go()">
		<h1>Cowbell</h1>
		<h2>a universal web audio player for demoscene music</h2>
		<select id="track-select">
			<option value="">Select a track...</option>
		</select>

		<div id="player"></div>
	</body>
</html>
