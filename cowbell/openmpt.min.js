(function(){function a(a,b,c,d){function f(a){function b(a){var b=stackAlloc(a.length+1);return writeAsciiToMemory(a,b),b}var c=new Int8Array(a),d=libopenmpt._malloc(c.byteLength);libopenmpt.HEAPU8.set(c,d),h=libopenmpt._openmpt_module_create_from_memory(d,c.byteLength,0,0,0),j=libopenmpt._malloc(16384),k=libopenmpt._malloc(16384);var e=stackSave();libopenmpt._openmpt_module_ctl_set(h,b("render.resampler.emulate_amiga"),b("1")),libopenmpt._openmpt_module_ctl_set(h,b("render.resampler.emulate_amiga_type"),b("a1200")),stackRestore(e),l.duration=libopenmpt._openmpt_module_get_duration_seconds(h)}function g(a){if(!c.pathToLibOpenMPT)throw"pathToLibOpenMPT not specified";if(window.libopenmpt&&window.libopenmpt._openmpt_module_create_from_memory)a();else{var b=document.getElementsByTagName("head")[0],d=document.createElement("script");d.src=c.pathToLibOpenMPT,window.libopenmpt={onRuntimeInitialized:function(){a(),b.removeChild(d)}},b.appendChild(d)}}var h,j,k,l=this;c||(c={}),d||(d={}),this.cleanup=function(){h&&libopenmpt._openmpt_module_destroy(h),j&&libopenmpt._free(j),k&&libopenmpt._free(k)},this.load=function(b){var c=this;g(function(){c.channelCount=2;var d=new XMLHttpRequest;d.addEventListener("error",function(a){console.log("XHR error",a)}),d.addEventListener("load",function(a){data=d.response,f(data),b()}),d.open("GET",a,!0),d.responseType="arraybuffer",d.send()})},this.generateAudio=function(a){for(var c=Math.min,d=a.getChannelData(0),e=a.getChannelData(1),f=a.length,g=0,l=!1;0<f;){for(var m=c(f,4096),n=libopenmpt._openmpt_module_read_float_stereo(h,b.sampleRate,m,j,k),o=libopenmpt.HEAPF32.subarray(j/4,j/4+n),p=libopenmpt.HEAPF32.subarray(k/4,k/4+n),q=0;q<n;++q)d[g+q]=o[q],e[g+q]=p[q];if(f-=n,g+=n,n<m)break}return g},this.seekable=!0,this.seek=function(a){libopenmpt._openmpt_module_set_position_seconds(h,a)},this.reset=function(){this.seek(0)}}Cowbell.Player.OpenMPT=function(b){return new Cowbell.Common.WebAudioPlayer(a,b)}})();